<html>
<head>
  <style>
    body {
        background-color: rgb(0, 0, 0);
    }

    h1 {
      color: aliceblue;
    }
    h2 {
      color: aliceblue;
    }
    h3 {
      color: aliceblue;
    }

    .button {
      background-color: #6e6b67;
      border: none;
      color: white;
      padding: 15px 32px;
      text-align: center;
      text-decoration: none;
      width: 49%;
      display: inline-block;
      font-size: 16px;
      transition: all 0.2s ease-in-out;
      box-shadow: 0 5px 15px rgba(145, 92, 182, .4);
      border-color: white;
      border-width: 1px;
      border-style: dotted;
    }

    button:hover {
        cursor: pointer;
        background:#bbb;
        color: black;
        border-color: black;
        border-width: 1px;
        border-style: dotted;
    }
  </style>
  
  <script>
    document.write('hello');
    document.write('<br>');
    document.write('<h2>hello</h2>');

    (async () => {
      const data1 = await fetch('./data.json').then(r => r.json());
      oldusernames = data1.data[0];
      oldmessages = data1.data[1];
      
      oldusernames = JSON.stringify(oldusernames);
      oldmessages = JSON.stringify(oldmessages);
      
      oldusernames = oldusernames.replace('{"name":"','');
      oldusernames = oldusernames.replace('"}','');
      oldmessages = oldmessages.replace('{"message":"','');
      oldmessages = oldmessages.replace('"}','');

      while (oldusernames.includes('+')){
        oldusernames = oldusernames.replace('+',' ');
      }
      while (oldmessages.includes('+')){
        oldmessages = oldmessages.replace('+',' ');
      }

      var usernames = oldusernames.split('&nextentry&')
      var messages = oldmessages.split('&nextentry&')

      sent = localStorage.getItem('sent');
      if (sent == null){
        sent = 'false';
        localStorage.setItem('sent','false');
      }

      if (sent == 'true'){
        document.write('<div style="width: 150%; height: 50px; padding: 0px; float: left; background: green;" class="center"> <h3 style="color:rgb(255, 166, 0);">Your message has been sent. It should appear in a less than a minute. You will need to refresh for it to appear.</h3> </div>');
      }
      localStorage.setItem('sent','false');

      document.write('<div style="width: 150%; height: 50px; padding: 0px; float: left; background: gray;" class="center"> <h2 style="color:rgb(255, 166, 0);">Skparab1 message forum</h1> </div>');
      document.write('<a href="https://skparab1.github.io/server/ui.html">Send a message</a>');
      let i = usernames.length-1;

      while (i > 0){
        document.write('<h2>'+usernames[i]+'</h2>');
        document.write('<h3>'+messages[i]+'</h3>');
        document.write('<br>');
        i -= 1;
      }

    })();
  </script>    
</head>

<body>

  <h1>Skparab1 forum message sender </h1>

  <form action="https://skparab1.github.io/server/sendmsg.html">
    <label for="name">Name:</label><br>
    <input type="text" id="name" name="name"><br>
    <label for="message">Message:</label><br>
    <input type="text" id="message" name="message"><br>
    <input type="submit" value="Submit">
  </form>
</body>
</html>
